collector_name: mysql_table_stats

metrics:
  - metric_name: mysql_table_data_bytes
    type: counter
    help: "Data length from information_schema.tables (MySQL)."
    key_labels: [schema, table_name]
    values: [data_bytes]
    query: |
      SELECT
        table_schema AS `schema`,
        table_name AS table_name,
        DATA_LENGTH AS data_bytes
      FROM information_schema.tables
      WHERE table_schema = 'test_db'
        AND table_name IN ('wp_jnginx', 'wp_nginx');

  - metric_name: mysql_table_row_count
    type: counter
    help: "Exact row count from target tables (MySQL)."
    key_labels: [schema, table_name]
    values: [row_count]
    query: |
      SELECT
        'test_db' AS `schema`,
        'wp_jnginx' AS table_name,
        COUNT(*) AS row_count
      FROM test_db.wp_jnginx
      UNION ALL
      SELECT
        'test_db' AS `schema`,
        'wp_nginx' AS table_name,
        COUNT(*) AS row_count
      FROM test_db.wp_nginx;
