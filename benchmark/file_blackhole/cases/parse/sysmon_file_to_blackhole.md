# 测试场景：sysmon_file_to_blackhole

本测试用于验证 **sysmon_file_to_blackhole** 场景下的引擎性能（Mac M4 Mini，日志解析）。

## 场景描述

本场景可概括为：**Sysmon 1K JSON 日志，File 输入到 BlackHole 输出，执行 日志解析 能力**。

本测试旨在评估 **WarpParse** 与 **Vector** 两款引擎在 Sysmon 1K JSON 日志 处理场景下的表现。

## 设计

1. **测试目标:** 对比两引擎在该日志场景下的吞吐、延迟、CPU/内存使用。
2. **输入配置:** File 输入，覆盖高并发/大吞吐压测场景。
3. **输出配置:** BlackHole 输出，用于验证链路吞吐能力。
4. **预期行为:**
* 高频日志稳定消费，不丢失、不乱序，字段提取正确。
* 在对应输入/输出链路下持续跑满数据源，不出现明显 backpressure。
* 监控指标可正常采集，用于后续性能对比。


## Results（Mac M4 Mini）

| **引擎** | **输入模式** | **输出模式** | **消费速率(EPS)** | **MPS** | **CPU平均/峰值** | **内存平均/峰值** |
| --- | --- | --- | --- | --- | --- | --- |
| WarpParse | File | BlackHole | **440,000** | 413.74 | **852.01 % / 943.50 %** | **223.52 MB / 338.05 MB** |
| Vector | File | BlackHole | **76,717** | 72.14 | **462.81 % / 563.70 %** | **294.87 MB / 312.77 MB** |

## 结论

在本测试场景（Sysmon 1K JSON 日志，File 输入到 BlackHole 输出，执行 日志解析 能力）中，对比 **WarpParse** 与 **Vector** 的性能表现，得出以下结论：

1. **吞吐性能**: **WarpParse** 表现出显著优势。
    * 消费速率达到 **440,000** EPS，约是 Vector (**76,717** EPS) 的 **5.74** 倍。
    * 这意味着在相同硬件资源下，WarpParse 能够处理更大规模的数据流量。

2. **系统资源开销**:
    * **CPU**: WarpParse 的 CPU 使用率更高（**852.01 %** vs **462.81 %**）。
    * **内存**: WarpParse 的内存占用更低（**223.52 MB** vs **294.87 MB**）。

**总结**:
WarpParse 在该场景下展现了卓越的吞吐性能（领先约 5.74 倍），同时保持了更低的内存占用。对于追求高吞吐量的日志处理场景，WarpParse 是更优的选择。
